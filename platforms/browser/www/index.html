<!DOCTYPE html>

<html>

<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <meta http-equiv="Content-Security-Policy" content="img-src * 'self' data:; default-src * 'self' gap: wss: ws: ; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline' 'unsafe-eval';">
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <title>Gestion sports</title>
</head>

<body>

	<div class="form">
	
		<center>
			<img style="width:150px;margin-bottom:20px" src="http://www.gestion-sports.com/gestion-sports/application/img/accueil.png" alt="Gestion-sports"/>
		</center>
		
		<div id="index">

			<ul class="tab-group">
				<li class="tab active"><a href="#login">Se connecter</a></li>
				<li class="tab"><a href="#signup">S'inscrire</a></li>
			</ul>

			<div class="tab-content">
			
				<!---------------------------- CONNEXION -------------------------->
				<div id="login">   
					
					<form action="http://www.gestion-sports.com/gestion-sports/connexion.php" method="post">

						<input type="hidden" name="compte" value="membre"/>
						
						<span class="charge_les_clubs"></span>

						<div class="field-wrap">
							<label>
								Identifiant<span class="req">*</span>
							</label>
							<input type="text" name="identifiant" id="email_connec" required/>
						</div>

						<div class="field-wrap">
							<label>
							  Mot de passe<span class="req">*</span>
							</label>
							<input type="password" name="pass" required />
						</div>
						
						<p class="forgot"><a class="show_pass">Mot de passe oublié ?</a></p>
						
						<button class="button button-block connec_send_mail_one_signal"/>Connexion</button>
					</form>
				</div>
				
				<!---------------------------- INSCRIPTION -------------------------->

				<div id="signup">   

					<form action="/" id="inscription" method="post">
					
						<span class="charge_les_clubs"></span>

						<select name="sexe" class="choose_sexe">
							<option>homme</option>
							<option>Femme</option>
						</select>
						
						<div class="top-row">
							<div class="field-wrap">
								<label>
									Nom<span class="req">*</span>
								</label>
								<input name="nom" type="text" required autocomplete="off" />
							</div>

							<div class="field-wrap">
								<label>
									Prénom<span class="req">*</span>
								</label>
								<input name="prenom" type="text" required autocomplete="off"/>
							</div>
						</div>
						
						<div class="field-wrap">
							<label>
							 Téléphone 1<span class="req">*</span>
							</label>
							<input name="tel1" type="text" required autocomplete="off"/>
						</div>
						
						<div class="field-wrap">
							<label>
							 Téléphone 2
							</label>
							<input name="tel2" type="text"  autocomplete="off"/>
						</div>
						
						<div class="field-wrap">
							<label>
							 Téléphone 3
							</label>
							<input name="tel3" type="text" autocomplete="off"/>
						</div>
						
						<div class="field-wrap">
							<label>
							 Profession
							</label>
							<input name="profession" type="text" autocomplete="off"/>
						</div>
						
						<div class="field-wrap">
							<label>
							 Date de naissance<span class="req">*</span>
							</label>
							<input name="date_naissance" type="date" required autocomplete="off"/>
						</div>
						
						<div class="field-wrap">
							<label>
							 Adresse<span class="req">*</span>
							</label>
							<input name="adresse" type="text" required autocomplete="off"/>
						</div>
						
						<div class="top-row">
							<div class="field-wrap">
								<label>
									Code postal<span class="req">*</span>
								</label>
								<input name="code_postal" type="text" required autocomplete="off" />
							</div>

							<div class="field-wrap">
								<label>
									Ville<span class="req">*</span>
								</label>
								<input name="ville" type="text" required autocomplete="off"/>
							</div>
						</div>
						
						<div class="field-wrap">
							<label>
							  Email<span class="req">*</span>
							</label>
							<input name="email" type="email" required autocomplete="off"/>
						</div>

						<div class="field-wrap">
							<label>
							  Mot de passe<span class="req">*</span>
							</label>
							<input name="pass" type="password" required autocomplete="off"/>
						</div>
						
						<div class="field-wrap">
							<label>
							  Confirmer le mot de passe<span class="req">*</span>
							</label>
							<input name="pass_confirm" type="password" required autocomplete="off"/>
						</div>

						<button class="button button-block send_inscription"/>S'inscrire</button>

					</form>

				</div>

			</div><!-- /tab-content -->
			
		</div><!-- /id index -->
		
		<div id="mot-de-passe" style="display:none;">
		
			<ul class="tab-group">
				<li class="active"><a class="show_index">Connexion / inscription</a></li>
			</ul>

			<div class="tab-content">
			
				<!---------------------------- MOT DE PASSE OUBLIE -------------------------->
				 
				<h1 class="mdp_oublie">Mot de passe oublié</h1>

				<form id="password">

					<input type="hidden" name="compte" value="membre"/>
					<input type="hidden" name="mdp_oublie" value="1"/>
					
					<span class="charge_les_clubs"></span>

					<div class="field-wrap">
						<label>
							Identifiant<span class="req">*</span>
						</label>
						<input type="text" name="email" required/>
					</div>

					<button class="send_forgot_password button button-block">Envoyer</button>
					
				</form>
			
			</div><!-- tab-content -->
		
		</div><!-- /id mot de passe -->
	  
	</div> <!-- /form -->

    <script type="text/javascript" src="cordova.js"></script>
	<script type="text/javascript" src="jquery.js"></script>
	<script type="text/javascript">
		
		function onDeviceReady() 
		{
			//cordova.InAppBrowser.open('http://www.gestion-sports.com/gestion-sports/application', '_blank', 'location=no,hardwareback=no,toolbar=no, disallowoverscroll=yes, suppressesIncrementalRendering=yes');

			var notificationOpenedCallback = function(jsonData) {
			alert("Notification opened:\n" + JSON.stringify(jsonData));
			console.log('notificationOpenedCallback: ' + JSON.stringify(jsonData));
			
			};
			
			window.plugins.OneSignal
			.startInit("4ffef649-1456-4cde-9ce3-151f00eb81e7")
			.handleNotificationOpened(notificationOpenedCallback)
			.endInit();
			
			window.plugins.OneSignal.addSubscriptionObserver(function (state) {
				console.log("Subscribed for OneSignal push notifications!");
				// get player ID
				state.to.userId;
				alert('salut ' + state.to.userId);
				console.log("Push Subscription state changed: " + JSON.stringify(state));
			});
		}

		alert('la ca marche 289');
		
		document.addEventListener("deviceready", onDeviceReady, false);
		
		

		</script>
		
		<script type="text/javascript">
			function alertDismissed() {} //sert a ce que l alert fonctionne il lui faut une fonction qui existe sinon ca ne marche pas 
			$(function() 
			{
				/****************** ONE SIGNAL MISE A JOUR **************/
				$( ".connec_send_mail_one_signal" ).click(function() 
				{
					//on envoie le club et l'email a onesignal
					window.plugins.OneSignal.sendTag("email", $("#email_connec").val().toLowerCase());
					window.plugins.OneSignal.sendTag("club", $(".choose_club").val().toLowerCase());
				});
				
				/*************** CHARGEMENT DES CLUBS *******************/
				$.ajax({
				   url : 'http://www.gestion-sports.com/gestion-sports/application/ajax/clubs.php',
				   type : 'GET', // Le type de la requête HTTP, ici devenu POST
				   dataType : 'html',
				   success: function (html) 
					{
						$(".charge_les_clubs").html(html);
					}
				});
				
				/**************** FORMULAIRE MOT DE PASSE OUBLIÉ **************/
				$('form#password').submit(function(event) {
					event.preventDefault();//on empeche la soumission du formulaire
				});
				$(".send_forgot_password").click(function(){
					$.ajax({
						url : 'http://www.gestion-sports.com/gestion-sports/application/ajax/mot-de-passe.php',
						type : 'POST', // Le type de la requête HTTP, ici devenu POST
						data: 'compte=' + $("form#password input[name=compte]").val() + '&mdp_oublie=1&club=' + $("form#password select[name=club]").val() + '&email=' + $("form#password input[name=email]").val(),
						dataType : 'html',
						success: function (html) 
						{
							navigator.notification.alert(
								html,  // message
								alertDismissed,         // callback
								'Vérifiez votre boite mail',            // title
								'OK'                  // buttonName
							);
							
						},
						error: function(resultat, statut, erreur) {
							navigator.notification.alert(
								'Une erreur est survenue veuillez réessayer',  // message
								alertDismissed,         // callback
								'Erreur',            // title
								'OK'                  // buttonName
							);
						}
					});
					//on revient aussi sur la page de connexion
					$("#index").show();
					$("#mot-de-passe").hide();
				});
				
				/**************** FORMULAIRE INSCRIPTION **************/
				$('form#inscription').submit(function(event) {
					event.preventDefault();//on empeche la soumission du formulaire
				});
				$(".send_inscription").click(function(){
					//alert("le clic marche");
					//alert( "sexe: "+ $("form#inscription select[name=sexe]").val() );
					//alert( "nom: "+ $("form#inscription input[name=nom]").val() );
					//alert( "prenom: "+ $("form#inscription input[name=prenom]").val() );
					$.ajax({
						url : 'http://www.gestion-sports.com/gestion-sports/application/ajax/inscription.php',
						type : 'POST', // Le type de la requête HTTP, ici devenu POST
						data:'sexe=' + $("form#inscription select[name=sexe]").val() +
							'&club=' + $("form#inscription select[name=club]").val() + 
							'&nom=' + $("form#inscription input[name=nom]").val() + 
							'&prenom=' + $("form#inscription input[name=prenom]").val() + 
							'&tel1=' + $("form#inscription input[name=tel1]").val() + 
							'&tel2=' + $("form#inscription input[name=tel2]").val() + 
							'&tel3=' + $("form#inscription input[name=tel3]").val() + 
							'&profession=' + $("form#inscription input[name=profession]").val() + 
							'&date_naissance=' + $("form#inscription input[name=date_naissance]").val() + 
							'&adresse=' + $("form#inscription input[name=adresse]").val() + 
							'&code_postal=' + $("form#inscription input[name=code_postal]").val() + 
							'&ville=' + $("form#inscription input[name=ville]").val() + 
							'&pass=' + $("form#inscription input[name=pass]").val() + 
							'&pass_confirm=' + $("form#inscription input[name=pass_confirm]").val() + 
							'&email=' + $("form#inscription input[name=email]").val(),
						dataType : 'html',
						success: function (html) 
						{
							navigator.notification.alert(
								html,  // message
								alertDismissed,         // callback
								'Inscription',            // title
								'Terminé'                  // buttonName
							);
							
						},
						error: function(resultat, statut, erreur) {
							//alert(statut);
							//alert(erreur);
							//alert(resultat);
							navigator.notification.alert(
								'Une erreur est survenue veuillez réessayer',  // message
								alertDismissed,         // callback
								'Erreur',            // title
								'OK'                  // buttonName
							);
						}
					});
					//on revient aussi sur la page de connexion
					$("#index").show();
					$("#mot-de-passe").hide();
				});
				
				/********************** TOGGLE ****************/
				$(".show_pass").click(function(){
					$("#mot-de-passe").show();
					$("#index").hide();
				});
				$(".show_index").click(function(){
					$("#index").show();
					$("#mot-de-passe").hide();
				});
				
				/********************* THEME pour label et placeholder ******************/
				$('.form').find('input, textarea').on('keyup blur focus', function (e) 
				{
					var $this = $(this),
					label = $this.prev('label');

					if (e.type === 'keyup') 
					{
						if ($this.val() === '') 
						{
							label.removeClass('active highlight');
							label.show();
						} 
						else 
						{
							label.addClass('active highlight');
							label.hide();
						}
					} 
					else if (e.type === 'blur') 
					{
						if( $this.val() === '' ) 
						{
							label.removeClass('active highlight'); 
							label.show();
						} 
						else 
						{
							label.removeClass('highlight');
							label.hide();			
						}   
					} 
					else if (e.type === 'focus') 
					{
						if( $this.val() === '' ) 
						{
							label.removeClass('highlight'); 
							label.show();
						} 
						else if( $this.val() !== '' ) 
						{
							label.addClass('highlight');
							label.hide();
						}
					}
				});
				
				/****************THEME POUR INSCRIPTION ET CONNEXION *********************/
				$('.tab a').on('click', function (e) {
				  
				  e.preventDefault();
				  
				  $(this).parent().addClass('active');
				  $(this).parent().siblings().removeClass('active');
				  
				  target = $(this).attr('href');

				  $('.tab-content > div').not(target).hide();
				  
				  $(target).fadeIn(600);
				  
				});
			});
		</script>
		
		
</body>

</html>
